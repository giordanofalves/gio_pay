<div class="container mx-auto">
    <div class="flex flex-row flex-wrap py-4">
        <aside class="w-14">
            <div class="sticky top-0 p-4 w-full">
                <ul class="flex flex-col overflow-hidden">
                    <h1 class="text-3xl font-bold mb-4">
                      <%= @merchant.reference %>
                    </h1>

                    <select data-controller="charts" data-action="charts#load_chart" class="mt-1 block w-full py-2 px-3 border border-gray-300 bg-white rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm">
                      <% %w[day week month year].each do |group| %>
                        <option value="<%= merchant_path(@merchant, group: "group_by_#{group}") %>">By <%= group %></option>
                      <% end %>
                    </select>
                </ul>
            </div>
        </aside>
        <main role="main" class="w-full">
            <div class="grid grid-cols-2 gap-4 mb-8">
              <div class="p-6 bg-white rounded shadow">
                <h2 class="text-xl font-semibold mb-2">Orders</h2>
                <p class="text-gray-600">
                  <%= @merchant.orders.count %>
                </p>
              </div>

              <div class="p-6 bg-white rounded shadow">
                <h2 class="text-xl font-semibold mb-2">Disbursements</h2>
                <p class="text-gray-600">
                  <%= @merchant.disbursements.count %>
                </p>
              </div>
            </div>

            <turbo-frame id="chart_data">
              <%= render partial: 'chart_data', locals: { merchant: @merchant, group_by: @group_param } %>
            </turbo-frame>
        </main>
    </div>
</div>
